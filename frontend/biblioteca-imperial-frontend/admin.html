<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Biblioteca Imperial</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="aquila">‚öî</span>
                    <h1>BIBLIOTECA IMPERIAL</h1>
                </div>
                <nav class="nav">
                    <a href="catalogo.html">üìö Cat√°logo</a>
                    <a href="emprestimos.html">üìã Empr√©stimos</a>
                    <a href="admin.html" class="active">‚öôÔ∏è Administra√ß√£o</a>
                    <div class="user-info">
                        <span id="userName">Carregando...</span>
                        <button onclick="logout()" class="btn-logout">Sair</button>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h2>‚öôÔ∏è Painel Administrativo</h2>
                <p class="subtitle">Gest√£o completa da Biblioteca Imperial</p>
            </div>

            <!-- N√≠vel de Acesso -->
            <div class="access-level-badge" id="accessLevelBadge">
                <span id="accessLevelText">Carregando...</span>
            </div>

            <!-- Admin Tabs -->
            <div class="admin-tabs">
                <button class="tab-btn active" onclick="showTab('usuarios')">
                    üë• Usu√°rios
                </button>
                <button class="tab-btn" onclick="showTab('autores')">
                    ‚úçÔ∏è Autores
                </button>
                <button class="tab-btn" onclick="showTab('categorias')">
                    üìÇ Categorias
                </button>
                <button class="tab-btn" onclick="showTab('obras')">
                    üìñ Obras
                </button>
                <button class="tab-btn" onclick="showTab('relatorios')">
                    üìä Relat√≥rios
                </button>
            </div>

            <!-- Tab: Usu√°rios -->
            <div id="tab-usuarios" class="tab-content active">
                <div class="admin-section">
                    <div class="section-header">
                        <h3>Gest√£o de Usu√°rios</h3>
                        <button class="btn-primary" onclick="showAddUserModal()">
                            ‚ûï Novo Usu√°rio
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Grupo</th>
                                    <th>N√≠vel</th>
                                    <th>Status</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="usuariosTableBody">
                                <tr>
                                    <td colspan="6" class="loading">Carregando usu√°rios...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tab: Autores -->
            <div id="tab-autores" class="tab-content">
                <div class="admin-section">
                    <div class="section-header">
                        <h3>Gest√£o de Autores</h3>
                        <button class="btn-primary" onclick="showAddAutorModal()">
                            ‚ûï Novo Autor
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Nacionalidade</th>
                                    <th>Obras</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="autoresTableBody">
                                <tr>
                                    <td colspan="4" class="loading">Carregando autores...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tab: Categorias -->
            <div id="tab-categorias" class="tab-content">
                <div class="admin-section">
                    <div class="section-header">
                        <h3>Gest√£o de Categorias</h3>
                        <button class="btn-primary" onclick="showAddCategoriaModal()">
                            ‚ûï Nova Categoria
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Descri√ß√£o</th>
                                    <th>N√≠vel de Restri√ß√£o</th>
                                    <th>Obras</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="categoriasTableBody">
                                <tr>
                                    <td colspan="5" class="loading">Carregando categorias...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tab: Obras -->
            <div id="tab-obras" class="tab-content">
                <div class="admin-section">
                    <div class="section-header">
                        <h3>Gest√£o de Obras</h3>
                        <button class="btn-primary" id="btnNovaObra" onclick="showAddObraModal()" style="display: none;">
                            ‚ûï Nova Obra
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>T√≠tulo</th>
                                    <th>Autor(es)</th>
                                    <th>Categoria</th>
                                    <th>ISBN</th>
                                    <th>Ano</th>
                                    <th>Exemplares</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="obrasTableBody">
                                <tr>
                                    <td colspan="7" class="loading">Carregando obras...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tab: Relat√≥rios -->
            <div id="tab-relatorios" class="tab-content">
                <div class="admin-section">
                    <h3>Relat√≥rios e Estat√≠sticas</h3>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-value" id="totalUsuarios">-</div>
                            <div class="stat-label">Usu√°rios Ativos</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üìö</div>
                            <div class="stat-value" id="totalObras">-</div>
                            <div class="stat-label">Obras no Acervo</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üìñ</div>
                            <div class="stat-value" id="totalEmprestimos">-</div>
                            <div class="stat-label">Empr√©stimos Ativos</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚ö†Ô∏è</div>
                            <div class="stat-value" id="totalAtrasados">-</div>
                            <div class="stat-label">Empr√©stimos Atrasados</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal: Adicionar/Editar Usu√°rio -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Novo Usu√°rio</h3>
                <button class="modal-close" onclick="closeUserModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <input type="hidden" id="userId">
                    
                    <div class="form-group">
                        <label>Nome Completo *</label>
                        <input type="text" id="userName" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" id="userEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Senha *</label>
                        <input type="password" id="userPassword" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Grupo de Acesso *</label>
                        <select id="userGrupo" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="userAtivo" checked>
                            Usu√°rio Ativo
                        </label>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="closeUserModal()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-primary">
                            Salvar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Adicionar/Editar Autor -->
    <div id="autorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="autorModalTitle">Novo Autor</h3>
                <button class="modal-close" onclick="closeAutorModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="autorForm">
                    <input type="hidden" id="autorId">
                    
                    <div class="form-group">
                        <label>Nome do Autor *</label>
                        <input type="text" id="autorNome" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Biografia</label>
                        <textarea id="autorBiografia" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Nacionalidade</label>
                        <input type="text" id="autorNacionalidade">
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="closeAutorModal()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-primary">
                            Salvar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Adicionar/Editar Categoria -->
    <div id="categoriaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoriaModalTitle">Nova Categoria</h3>
                <button class="modal-close" onclick="closeCategoriaModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="categoriaForm">
                    <input type="hidden" id="categoriaId">
                    
                    <div class="form-group">
                        <label>Nome da Categoria *</label>
                        <input type="text" id="categoriaNome" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <textarea id="categoriaDescricao" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>N√≠vel de Restri√ß√£o *</label>
                        <select id="categoriaNivelRestricao" required>
                            <option value="0">0 - P√∫blico</option>
                            <option value="1">1 - Restrito B√°sico</option>
                            <option value="2">2 - Restrito</option>
                            <option value="3">3 - Restrito T√©cnico</option>
                            <option value="4">4 - Altamente Restrito</option>
                            <option value="5">5 - Classificado Imperial</option>
                        </select>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="closeCategoriaModal()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-primary">
                            Salvar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Adicionar/Editar Obra -->
    <div id="obraModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="obraModalTitle">Nova Obra</h3>
                <button class="modal-close" onclick="closeObraModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="obraForm">
                    <input type="hidden" id="obraId">
                    
                    <div class="form-group">
                        <label>T√≠tulo *</label>
                        <input type="text" id="obraTitulo" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Subt√≠tulo</label>
                        <input type="text" id="obraSubtitulo">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>ISBN *</label>
                            <input type="text" id="obraIsbn" required placeholder="978-1-84154-000-0">
                        </div>
                        
                        <div class="form-group">
                            <label>Ano de Publica√ß√£o *</label>
                            <input type="number" id="obraAno" required min="1000" max="9999">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Categoria *</label>
                            <select id="obraCategoria" required>
                                <option value="">Selecione...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Editora</label>
                            <input type="text" id="obraEditora">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Idioma</label>
                            <input type="text" id="obraIdioma" value="Portugu√™s">
                        </div>
                        
                        <div class="form-group">
                            <label>N√∫mero de P√°ginas</label>
                            <input type="number" id="obraPaginas" min="1">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Sinopse</label>
                        <textarea id="obraSinopse" rows="4"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Localiza√ß√£o F√≠sica</label>
                        <input type="text" id="obraLocalizacao" placeholder="Ex: Estante A, Prateleira 3">
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="closeObraModal()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-primary">
                            Salvar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>Em nome do Imperador da Humanidade</p>
        <p class="small">Biblioteca Imperial - Reposit√≥rio Sagrado do Conhecimento do Imperium</p>
    </footer>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
